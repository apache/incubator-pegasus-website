<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pegasus | Monitoring</title>
    <link rel="stylesheet" href="/assets/css/app.css">
    <link rel="shortcut icon" href="/assets/images/favicon.ico">
    <link rel="stylesheet" href="/assets/css/utilities.min.css">
    <link rel="stylesheet" href="/assets/css/docsearch.v3.css">
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/all.min.js"></script>
    <script src="/assets/js/docsearch.v3.js"></script>
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Monitoring | Pegasus</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Monitoring" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Components Since v1.12.0, Pegasus supports collecting and visualizing monitoring metrics using Prometheus and Grafana. Prometheus Prometheus is an open-source system monitoring and alerting toolkit. It stores metrics from monitored systems in its own time-series database, and provides a rich multi-dimensional query language to meet different visualization needs. Grafana Grafana is an open-source analytics and visualization platform. It supports multiple mainstream time-series data sources including Prometheus. With query languages corresponding to each data source, Grafana retrieves and displays data, and through configurable dashboards, quickly presents these data in charts. Note This document only provides one approach to collect and visualize Pegasus monitoring data using Prometheus and Grafana. Pegasus does not include or maintain these components. For more details, please refer to their official documentation. Configure Prometheus This section describes how to configure Prometheus. Step 1: Configure Pegasus services By default, Pegasus does not push metrics to any external system. You need to modify the configuration to enable Prometheus push: [pegasus.server] perf_counter_sink = prometheus prometheus_port = 9091 Note: To verify that Prometheus push is enabled on a Pegasus node, check whether http://{pegasus_host}:{prometheus_port}/metrics is accessible. Using Prometheus with Onebox If you use onebox, first modify src/server/config.min.ini to enable Prometheus push. You do not need to change prometheus_port: [pegasus.server] perf_counter_sink = prometheus prometheus_port = @PROMETHEUS_PORT@ In onebox mode, multiple Pegasus processes run on a single machine, so the Prometheus ports of replica, meta, and collector may conflict. Our current solution is to assign a dedicated Prometheus port to each process: collector: 9091 meta: [9092, 9093, 9094…] replica: [9092+{META_COUNT}, 9093+{META_COUNT}, 9094+{META_COUNT}…] For example, for a onebox cluster with 2 meta, 3 replica, and 1 collector: ./run.sh start_onebox -r 3 -m 2 -c meta1: 9092, meta2: 9093 replica1: 9094, replica2: 9095, replica3: 9096 Step 2: Install and run Prometheus wget https://github.com/prometheus/prometheus/releases/download/v2.15.2/prometheus-2.15.2.linux-amd64.tar.gz tar xvfz prometheus-2.15.2.linux-amd64.tar.gz cd prometheus-2.15.2.linux-amd64 Modify prometheus.yml under the Prometheus directory. Example template: global: scrape_interval: 5s scrape_configs: - job_name: &#39;pegasus&#39; static_configs: - targets: [&#39;collector_host:9091&#39;] labels: group: collector - targets: [&#39;meta_host1:9091&#39;, &#39;meta_host2:9091&#39;, &#39;meta_host3:9091&#39;] labels: group: meta - targets: [&#39;replica_host1:9091&#39;, &#39;replica_host2:9091&#39;, &#39;replica_host3:9091&#39;] labels: group: replica # # NOTE: Add the following lines if node exporter is deployed. # - targets: # [ # &#39;node_exporter_host1:9100&#39;, # &#39;node_exporter_host2:9100&#39;, # ... # &#39;node_exporter_hostn:9100&#39;, # ] # labels: # group: node_exporter For the onebox cluster started by ./run.sh start_onebox -r 3 -m 2 -c, the actual configuration is: global: scrape_interval: 5s scrape_configs: - job_name: &quot;pegasus&quot; static_configs: - targets: [&quot;0.0.0.0:9091&quot;] labels: group: collector - targets: [&quot;0.0.0.0:9092&quot;, &quot;0.0.0.0:9093&quot;] labels: group: meta - targets: [&quot;0.0.0.0:9094&quot;, &quot;0.0.0.0:9095&quot;, &quot;0.0.0.0:9096&quot;] labels: group: replica After modifying prometheus.yml, start Prometheus: ./prometheus --config.file=prometheus.yml Open http://localhost:9090. Seeing the following page indicates success for this step: Note: To verify Prometheus configuration, check http://{prometheus_host}:9090/targets to view the scrape status of each node. In the Expression input box, type your query and click Execute to display the results in the Table tab. Select Graph to view the time series chart. Note In real operations, we often need system-level metrics such as cpu.busy, disk.iostat, etc. When deploying Pegasus clusters, consider deploying a node exporter on each machine. See: Node Exporter Alert Manager is Prometheus’s alerting component, which requires separate deployment (solution not provided here; refer to official docs). With Alert Manager, users can configure alert policies and receive notifications via email, SMS, etc. Currently our prometheus.yml uses static configuration (static_configs). Its drawback is that you must manually update the config when scaling. Prometheus supports multiple dynamic service discovery mechanisms (e.g., k8s, Consul, DNS). You can customize based on your needs. See: Configuration, Custom SD Configure Grafana This section describes how to configure Grafana. Step 1: Install and run Grafana Download Grafana binary: wget https://dl.grafana.com/oss/release/grafana-6.0.0.linux-amd64.tar.gz # if it fails, try adding --no-check-certificate tar -zxvf grafana-6.0.0.linux-amd64.tar.gz cd grafana-6.0.0 Start Grafana: ./bin/grafana-server web If you see output like below, Grafana is started successfully: INFO[07-24|14:36:59] Starting Grafana logger=server version=6.0.0 commit=34a9a62 branch=HEAD compiled=2019-02-25T22:47:26+0800 ... INFO[07-24|14:37:00] HTTP Server Listen logger=http.server address=0.0.0.0:3000 protocol=http subUrl= socket= INFO[07-24|14:37:00] cleanup of expired auth tokens done logger=auth count=2 Step 2: Add Prometheus as a data source Log in to Grafana: Default address: http://localhost:3000 Default username: admin Default password: admin Note: You can skip the Change Password step. Click Configuration in the Grafana sidebar, then Data Sources. Click Add data source. Specify the data source information: In Name, give the data source a name. In Type, select Prometheus. In URL, specify the IP address of Prometheus. Specify other fields as needed. Click Add to save the new data source. Step 3: Import Pegasus Dashboard Pegasus provides a dashboard with basic monitoring. The corresponding JSON file: Pegasus dashboard JSON After downloading the JSON, import it into Grafana: Open Grafana, click the “+” on the left, select Import, and go to the import page. Click the “Upload .json File” button at the top right, then select the file. After selection, you will see the following page: Click “import” at the bottom left to complete the import and open the Pegasus Dashboard: The dashboard contains two rows: Pegasus-Cluster and Pegasus-Table, representing cluster-level and table-level monitoring. Enter the specific cluster name in the cluster_name control at the top-left to view the corresponding metrics of that cluster." />
<meta property="og:description" content="Components Since v1.12.0, Pegasus supports collecting and visualizing monitoring metrics using Prometheus and Grafana. Prometheus Prometheus is an open-source system monitoring and alerting toolkit. It stores metrics from monitored systems in its own time-series database, and provides a rich multi-dimensional query language to meet different visualization needs. Grafana Grafana is an open-source analytics and visualization platform. It supports multiple mainstream time-series data sources including Prometheus. With query languages corresponding to each data source, Grafana retrieves and displays data, and through configurable dashboards, quickly presents these data in charts. Note This document only provides one approach to collect and visualize Pegasus monitoring data using Prometheus and Grafana. Pegasus does not include or maintain these components. For more details, please refer to their official documentation. Configure Prometheus This section describes how to configure Prometheus. Step 1: Configure Pegasus services By default, Pegasus does not push metrics to any external system. You need to modify the configuration to enable Prometheus push: [pegasus.server] perf_counter_sink = prometheus prometheus_port = 9091 Note: To verify that Prometheus push is enabled on a Pegasus node, check whether http://{pegasus_host}:{prometheus_port}/metrics is accessible. Using Prometheus with Onebox If you use onebox, first modify src/server/config.min.ini to enable Prometheus push. You do not need to change prometheus_port: [pegasus.server] perf_counter_sink = prometheus prometheus_port = @PROMETHEUS_PORT@ In onebox mode, multiple Pegasus processes run on a single machine, so the Prometheus ports of replica, meta, and collector may conflict. Our current solution is to assign a dedicated Prometheus port to each process: collector: 9091 meta: [9092, 9093, 9094…] replica: [9092+{META_COUNT}, 9093+{META_COUNT}, 9094+{META_COUNT}…] For example, for a onebox cluster with 2 meta, 3 replica, and 1 collector: ./run.sh start_onebox -r 3 -m 2 -c meta1: 9092, meta2: 9093 replica1: 9094, replica2: 9095, replica3: 9096 Step 2: Install and run Prometheus wget https://github.com/prometheus/prometheus/releases/download/v2.15.2/prometheus-2.15.2.linux-amd64.tar.gz tar xvfz prometheus-2.15.2.linux-amd64.tar.gz cd prometheus-2.15.2.linux-amd64 Modify prometheus.yml under the Prometheus directory. Example template: global: scrape_interval: 5s scrape_configs: - job_name: &#39;pegasus&#39; static_configs: - targets: [&#39;collector_host:9091&#39;] labels: group: collector - targets: [&#39;meta_host1:9091&#39;, &#39;meta_host2:9091&#39;, &#39;meta_host3:9091&#39;] labels: group: meta - targets: [&#39;replica_host1:9091&#39;, &#39;replica_host2:9091&#39;, &#39;replica_host3:9091&#39;] labels: group: replica # # NOTE: Add the following lines if node exporter is deployed. # - targets: # [ # &#39;node_exporter_host1:9100&#39;, # &#39;node_exporter_host2:9100&#39;, # ... # &#39;node_exporter_hostn:9100&#39;, # ] # labels: # group: node_exporter For the onebox cluster started by ./run.sh start_onebox -r 3 -m 2 -c, the actual configuration is: global: scrape_interval: 5s scrape_configs: - job_name: &quot;pegasus&quot; static_configs: - targets: [&quot;0.0.0.0:9091&quot;] labels: group: collector - targets: [&quot;0.0.0.0:9092&quot;, &quot;0.0.0.0:9093&quot;] labels: group: meta - targets: [&quot;0.0.0.0:9094&quot;, &quot;0.0.0.0:9095&quot;, &quot;0.0.0.0:9096&quot;] labels: group: replica After modifying prometheus.yml, start Prometheus: ./prometheus --config.file=prometheus.yml Open http://localhost:9090. Seeing the following page indicates success for this step: Note: To verify Prometheus configuration, check http://{prometheus_host}:9090/targets to view the scrape status of each node. In the Expression input box, type your query and click Execute to display the results in the Table tab. Select Graph to view the time series chart. Note In real operations, we often need system-level metrics such as cpu.busy, disk.iostat, etc. When deploying Pegasus clusters, consider deploying a node exporter on each machine. See: Node Exporter Alert Manager is Prometheus’s alerting component, which requires separate deployment (solution not provided here; refer to official docs). With Alert Manager, users can configure alert policies and receive notifications via email, SMS, etc. Currently our prometheus.yml uses static configuration (static_configs). Its drawback is that you must manually update the config when scaling. Prometheus supports multiple dynamic service discovery mechanisms (e.g., k8s, Consul, DNS). You can customize based on your needs. See: Configuration, Custom SD Configure Grafana This section describes how to configure Grafana. Step 1: Install and run Grafana Download Grafana binary: wget https://dl.grafana.com/oss/release/grafana-6.0.0.linux-amd64.tar.gz # if it fails, try adding --no-check-certificate tar -zxvf grafana-6.0.0.linux-amd64.tar.gz cd grafana-6.0.0 Start Grafana: ./bin/grafana-server web If you see output like below, Grafana is started successfully: INFO[07-24|14:36:59] Starting Grafana logger=server version=6.0.0 commit=34a9a62 branch=HEAD compiled=2019-02-25T22:47:26+0800 ... INFO[07-24|14:37:00] HTTP Server Listen logger=http.server address=0.0.0.0:3000 protocol=http subUrl= socket= INFO[07-24|14:37:00] cleanup of expired auth tokens done logger=auth count=2 Step 2: Add Prometheus as a data source Log in to Grafana: Default address: http://localhost:3000 Default username: admin Default password: admin Note: You can skip the Change Password step. Click Configuration in the Grafana sidebar, then Data Sources. Click Add data source. Specify the data source information: In Name, give the data source a name. In Type, select Prometheus. In URL, specify the IP address of Prometheus. Specify other fields as needed. Click Add to save the new data source. Step 3: Import Pegasus Dashboard Pegasus provides a dashboard with basic monitoring. The corresponding JSON file: Pegasus dashboard JSON After downloading the JSON, import it into Grafana: Open Grafana, click the “+” on the left, select Import, and go to the import page. Click the “Upload .json File” button at the top right, then select the file. After selection, you will see the following page: Click “import” at the bottom left to complete the import and open the Pegasus Dashboard: The dashboard contains two rows: Pegasus-Cluster and Pegasus-Table, representing cluster-level and table-level monitoring. Enter the specific cluster name in the cluster_name control at the top-left to view the corresponding metrics of that cluster." />
<meta property="og:site_name" content="Pegasus" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-11-06T10:36:30+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Monitoring" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-11-06T10:36:30+00:00","datePublished":"2025-11-06T10:36:30+00:00","description":"Components Since v1.12.0, Pegasus supports collecting and visualizing monitoring metrics using Prometheus and Grafana. Prometheus Prometheus is an open-source system monitoring and alerting toolkit. It stores metrics from monitored systems in its own time-series database, and provides a rich multi-dimensional query language to meet different visualization needs. Grafana Grafana is an open-source analytics and visualization platform. It supports multiple mainstream time-series data sources including Prometheus. With query languages corresponding to each data source, Grafana retrieves and displays data, and through configurable dashboards, quickly presents these data in charts. Note This document only provides one approach to collect and visualize Pegasus monitoring data using Prometheus and Grafana. Pegasus does not include or maintain these components. For more details, please refer to their official documentation. Configure Prometheus This section describes how to configure Prometheus. Step 1: Configure Pegasus services By default, Pegasus does not push metrics to any external system. You need to modify the configuration to enable Prometheus push: [pegasus.server] perf_counter_sink = prometheus prometheus_port = 9091 Note: To verify that Prometheus push is enabled on a Pegasus node, check whether http://{pegasus_host}:{prometheus_port}/metrics is accessible. Using Prometheus with Onebox If you use onebox, first modify src/server/config.min.ini to enable Prometheus push. You do not need to change prometheus_port: [pegasus.server] perf_counter_sink = prometheus prometheus_port = @PROMETHEUS_PORT@ In onebox mode, multiple Pegasus processes run on a single machine, so the Prometheus ports of replica, meta, and collector may conflict. Our current solution is to assign a dedicated Prometheus port to each process: collector: 9091 meta: [9092, 9093, 9094…] replica: [9092+{META_COUNT}, 9093+{META_COUNT}, 9094+{META_COUNT}…] For example, for a onebox cluster with 2 meta, 3 replica, and 1 collector: ./run.sh start_onebox -r 3 -m 2 -c meta1: 9092, meta2: 9093 replica1: 9094, replica2: 9095, replica3: 9096 Step 2: Install and run Prometheus wget https://github.com/prometheus/prometheus/releases/download/v2.15.2/prometheus-2.15.2.linux-amd64.tar.gz tar xvfz prometheus-2.15.2.linux-amd64.tar.gz cd prometheus-2.15.2.linux-amd64 Modify prometheus.yml under the Prometheus directory. Example template: global: scrape_interval: 5s scrape_configs: - job_name: &#39;pegasus&#39; static_configs: - targets: [&#39;collector_host:9091&#39;] labels: group: collector - targets: [&#39;meta_host1:9091&#39;, &#39;meta_host2:9091&#39;, &#39;meta_host3:9091&#39;] labels: group: meta - targets: [&#39;replica_host1:9091&#39;, &#39;replica_host2:9091&#39;, &#39;replica_host3:9091&#39;] labels: group: replica # # NOTE: Add the following lines if node exporter is deployed. # - targets: # [ # &#39;node_exporter_host1:9100&#39;, # &#39;node_exporter_host2:9100&#39;, # ... # &#39;node_exporter_hostn:9100&#39;, # ] # labels: # group: node_exporter For the onebox cluster started by ./run.sh start_onebox -r 3 -m 2 -c, the actual configuration is: global: scrape_interval: 5s scrape_configs: - job_name: &quot;pegasus&quot; static_configs: - targets: [&quot;0.0.0.0:9091&quot;] labels: group: collector - targets: [&quot;0.0.0.0:9092&quot;, &quot;0.0.0.0:9093&quot;] labels: group: meta - targets: [&quot;0.0.0.0:9094&quot;, &quot;0.0.0.0:9095&quot;, &quot;0.0.0.0:9096&quot;] labels: group: replica After modifying prometheus.yml, start Prometheus: ./prometheus --config.file=prometheus.yml Open http://localhost:9090. Seeing the following page indicates success for this step: Note: To verify Prometheus configuration, check http://{prometheus_host}:9090/targets to view the scrape status of each node. In the Expression input box, type your query and click Execute to display the results in the Table tab. Select Graph to view the time series chart. Note In real operations, we often need system-level metrics such as cpu.busy, disk.iostat, etc. When deploying Pegasus clusters, consider deploying a node exporter on each machine. See: Node Exporter Alert Manager is Prometheus’s alerting component, which requires separate deployment (solution not provided here; refer to official docs). With Alert Manager, users can configure alert policies and receive notifications via email, SMS, etc. Currently our prometheus.yml uses static configuration (static_configs). Its drawback is that you must manually update the config when scaling. Prometheus supports multiple dynamic service discovery mechanisms (e.g., k8s, Consul, DNS). You can customize based on your needs. See: Configuration, Custom SD Configure Grafana This section describes how to configure Grafana. Step 1: Install and run Grafana Download Grafana binary: wget https://dl.grafana.com/oss/release/grafana-6.0.0.linux-amd64.tar.gz # if it fails, try adding --no-check-certificate tar -zxvf grafana-6.0.0.linux-amd64.tar.gz cd grafana-6.0.0 Start Grafana: ./bin/grafana-server web If you see output like below, Grafana is started successfully: INFO[07-24|14:36:59] Starting Grafana logger=server version=6.0.0 commit=34a9a62 branch=HEAD compiled=2019-02-25T22:47:26+0800 ... INFO[07-24|14:37:00] HTTP Server Listen logger=http.server address=0.0.0.0:3000 protocol=http subUrl= socket= INFO[07-24|14:37:00] cleanup of expired auth tokens done logger=auth count=2 Step 2: Add Prometheus as a data source Log in to Grafana: Default address: http://localhost:3000 Default username: admin Default password: admin Note: You can skip the Change Password step. Click Configuration in the Grafana sidebar, then Data Sources. Click Add data source. Specify the data source information: In Name, give the data source a name. In Type, select Prometheus. In URL, specify the IP address of Prometheus. Specify other fields as needed. Click Add to save the new data source. Step 3: Import Pegasus Dashboard Pegasus provides a dashboard with basic monitoring. The corresponding JSON file: Pegasus dashboard JSON After downloading the JSON, import it into Grafana: Open Grafana, click the “+” on the left, select Import, and go to the import page. Click the “Upload .json File” button at the top right, then select the file. After selection, you will see the following page: Click “import” at the bottom left to complete the import and open the Pegasus Dashboard: The dashboard contains two rows: Pegasus-Cluster and Pegasus-Table, representing cluster-level and table-level monitoring. Enter the specific cluster name in the cluster_name control at the top-left to view the corresponding metrics of that cluster.","headline":"Monitoring","mainEntityOfPage":{"@type":"WebPage","@id":"/administration/monitoring"},"url":"/administration/monitoring"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>
    <div class="dashboard is-full-height">
        <!-- left panel -->
        <div class="dashboard-panel is-medium is-hidden-mobile pl-0">
            <div class="dashboard-panel-header has-text-centered">
                <a href="/">
                    <img src="/assets/images/pegasus-logo-inv.png" style="width: 80%;">
                </a>
                
            </div>
            <div class="dashboard-panel-main is-scrollable pl-6">
                

<aside class="menu">
    
    <p class="menu-label">The Pegasus documentation</p>
    <ul class="menu-list">
        
        <li>
            <a href="/docs/downloads"
                class="">
                Downloads
            </a>
        </li>
        
    </ul>
    
    <p class="menu-label">Building Pegasus</p>
    <ul class="menu-list">
        
        <li>
            <a href="/docs/build/compile-by-docker"
                class="">
                Compile by docker (recommended)
            </a>
        </li>
        
        <li>
            <a href="/docs/build/compile-from-source"
                class="">
                Compile from source
            </a>
        </li>
        
    </ul>
    
    <p class="menu-label">Client Libs</p>
    <ul class="menu-list">
        
        <li>
            <a href="/clients/java-client"
                class="">
                Java Client
            </a>
        </li>
        
        <li>
            <a href="/clients/cpp-client"
                class="">
                C++ Client
            </a>
        </li>
        
        <li>
            <a href="/clients/go-client"
                class="">
                Golang Client
            </a>
        </li>
        
        <li>
            <a href="/clients/python-client"
                class="">
                Python Client
            </a>
        </li>
        
        <li>
            <a href="/clients/node-client"
                class="">
                NodeJS Client
            </a>
        </li>
        
        <li>
            <a href="/clients/scala-client"
                class="">
                Scala Client
            </a>
        </li>
        
    </ul>
    
    <p class="menu-label">Tools</p>
    <ul class="menu-list">
        
        <li>
            <a href="/docs/tools/shell"
                class="">
                Pegasus Shell
            </a>
        </li>
        
        <li>
            <a href="https://github.com/pegasus-kv/admin-cli"
                class="">
                Admin CLI
            </a>
        </li>
        
        <li>
            <a href="https://github.com/pegasus-kv/pegic"
                class="">
                Pegasus data access CLI
            </a>
        </li>
        
    </ul>
    
    <p class="menu-label">API</p>
    <ul class="menu-list">
        
        <li>
            <a href="/api/ttl"
                class="">
                TTL(Time To Live)
            </a>
        </li>
        
        <li>
            <a href="/api/single-atomic"
                class="">
                Single-Atomic Operations
            </a>
        </li>
        
        <li>
            <a href="/api/redis"
                class="">
                Redis Adaption
            </a>
        </li>
        
        <li>
            <a href="/api/geo"
                class="">
                GEO Support
            </a>
        </li>
        
        <li>
            <a href="/api/http"
                class="">
                HTTP API
            </a>
        </li>
        
    </ul>
    
    <p class="menu-label">Admin</p>
    <ul class="menu-list">
        
        <li>
            <a href="/administration/deployment"
                class="">
                Deployment
            </a>
        </li>
        
        <li>
            <a href="/administration/config"
                class="">
                Configurations
            </a>
        </li>
        
        <li>
            <a href="/administration/rebalance"
                class="">
                Rebalance
            </a>
        </li>
        
        <li>
            <a href="/administration/monitoring"
                class="is-active">
                Monitoring
            </a>
        </li>
        
        <li>
            <a href="/administration/rolling-update"
                class="">
                Rolling Restart and Upgrade
            </a>
        </li>
        
        <li>
            <a href="/administration/scale-in-out"
                class="">
                Scale-in and Scale-out
            </a>
        </li>
        
        <li>
            <a href="/administration/resource-management"
                class="">
                Resource Management
            </a>
        </li>
        
        <li>
            <a href="/administration/cold-backup"
                class="">
                Cold Backup
            </a>
        </li>
        
        <li>
            <a href="/administration/meta-recovery"
                class="">
                Metadata Recovery
            </a>
        </li>
        
        <li>
            <a href="/administration/replica-recovery"
                class="">
                Replica Data Recovery
            </a>
        </li>
        
        <li>
            <a href="/administration/zk-migration"
                class="">
                Zookeeper Migration
            </a>
        </li>
        
        <li>
            <a href="/administration/table-migration"
                class="">
                Table Migration
            </a>
        </li>
        
        <li>
            <a href="/administration/table-soft-delete"
                class="">
                Table Soft-Delete
            </a>
        </li>
        
        <li>
            <a href="/administration/table-env"
                class="">
                Table Environment Variables
            </a>
        </li>
        
        <li>
            <a href="/administration/remote-commands"
                class="">
                Remote Command
            </a>
        </li>
        
        <li>
            <a href="/administration/partition-split"
                class="">
                Partition-Split
            </a>
        </li>
        
        <li>
            <a href="/administration/duplication"
                class="">
                Duplication
            </a>
        </li>
        
        <li>
            <a href="/administration/compression"
                class="">
                Data Compression
            </a>
        </li>
        
        <li>
            <a href="/administration/throttling"
                class="">
                Throttling
            </a>
        </li>
        
        <li>
            <a href="/administration/experiences"
                class="">
                Experiences
            </a>
        </li>
        
        <li>
            <a href="/administration/manual-compact"
                class="">
                Manual Compact
            </a>
        </li>
        
        <li>
            <a href="/administration/usage-scenario"
                class="">
                Usage Scenario
            </a>
        </li>
        
        <li>
            <a href="/administration/bad-disk"
                class="">
                Bad Disk Repair
            </a>
        </li>
        
        <li>
            <a href="/administration/whitelist"
                class="">
                Replica Server Whitelist
            </a>
        </li>
        
        <li>
            <a href="/administration/backup-request"
                class="">
                Backup Request
            </a>
        </li>
        
        <li>
            <a href="/administration/hotspot-detection"
                class="">
                Hotspot Detection
            </a>
        </li>
        
    </ul>
    
</aside>
            </div>
        </div>

        <!-- main section -->
        <div class="dashboard-main is-scrollable">
            <nav class="navbar is-hidden-desktop">
    <div class="navbar-brand">
        <a href="/" class="navbar-item">
            <!-- Pegasus Icon -->
            <img src="/assets/images/pegasus-square.png">
        </a>
        <div class="navbar-item">
            

<!--A simple language switch button that only supports zh and en.-->
<!--IF its language is zh, then switches to en.-->

<a class="button is-light is-outlined is-inverted" href="/zh/administration/monitoring"><strong>中</strong></a>

        </div>
        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
            <!-- Appears in mobile mode only -->
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>
    <div class="navbar-menu" id="navMenu">
        <div class="navbar-end">
            
            <!--dropdown-->
            <div class="navbar-item has-dropdown is-hoverable">
                <a href=""
                    class="navbar-link ">
                    <span>
                        The Pegasus documentation
                    </span>
                </a>
                <div class="navbar-dropdown">
                    
                    <a href="/docs/downloads"
                        class="navbar-item ">
                        Downloads
                    </a>
                    
                </div>
            </div>
            
            <!--dropdown-->
            <div class="navbar-item has-dropdown is-hoverable">
                <a href=""
                    class="navbar-link ">
                    <span>
                        Building Pegasus
                    </span>
                </a>
                <div class="navbar-dropdown">
                    
                    <a href="/docs/build/compile-by-docker"
                        class="navbar-item ">
                        Compile by docker (recommended)
                    </a>
                    
                    <a href="/docs/build/compile-from-source"
                        class="navbar-item ">
                        Compile from source
                    </a>
                    
                </div>
            </div>
            
            <!--dropdown-->
            <div class="navbar-item has-dropdown is-hoverable">
                <a href=""
                    class="navbar-link ">
                    <span>
                        Client Libs
                    </span>
                </a>
                <div class="navbar-dropdown">
                    
                    <a href="/clients/java-client"
                        class="navbar-item ">
                        Java Client
                    </a>
                    
                    <a href="/clients/cpp-client"
                        class="navbar-item ">
                        C++ Client
                    </a>
                    
                    <a href="/clients/go-client"
                        class="navbar-item ">
                        Golang Client
                    </a>
                    
                    <a href="/clients/python-client"
                        class="navbar-item ">
                        Python Client
                    </a>
                    
                    <a href="/clients/node-client"
                        class="navbar-item ">
                        NodeJS Client
                    </a>
                    
                    <a href="/clients/scala-client"
                        class="navbar-item ">
                        Scala Client
                    </a>
                    
                </div>
            </div>
            
            <!--dropdown-->
            <div class="navbar-item has-dropdown is-hoverable">
                <a href=""
                    class="navbar-link ">
                    <span>
                        Tools
                    </span>
                </a>
                <div class="navbar-dropdown">
                    
                    <a href="/docs/tools/shell"
                        class="navbar-item ">
                        Pegasus Shell
                    </a>
                    
                    <a href="https://github.com/pegasus-kv/admin-cli"
                        class="navbar-item ">
                        Admin CLI
                    </a>
                    
                    <a href="https://github.com/pegasus-kv/pegic"
                        class="navbar-item ">
                        Pegasus data access CLI
                    </a>
                    
                </div>
            </div>
            
            <!--dropdown-->
            <div class="navbar-item has-dropdown is-hoverable">
                <a href=""
                    class="navbar-link ">
                    <span>
                        API
                    </span>
                </a>
                <div class="navbar-dropdown">
                    
                    <a href="/api/ttl"
                        class="navbar-item ">
                        TTL(Time To Live)
                    </a>
                    
                    <a href="/api/single-atomic"
                        class="navbar-item ">
                        Single-Atomic Operations
                    </a>
                    
                    <a href="/api/redis"
                        class="navbar-item ">
                        Redis Adaption
                    </a>
                    
                    <a href="/api/geo"
                        class="navbar-item ">
                        GEO Support
                    </a>
                    
                    <a href="/api/http"
                        class="navbar-item ">
                        HTTP API
                    </a>
                    
                </div>
            </div>
            
            <!--dropdown-->
            <div class="navbar-item has-dropdown is-hoverable">
                <a href=""
                    class="navbar-link ">
                    <span>
                        Admin
                    </span>
                </a>
                <div class="navbar-dropdown">
                    
                    <a href="/administration/deployment"
                        class="navbar-item ">
                        Deployment
                    </a>
                    
                    <a href="/administration/config"
                        class="navbar-item ">
                        Configurations
                    </a>
                    
                    <a href="/administration/rebalance"
                        class="navbar-item ">
                        Rebalance
                    </a>
                    
                    <a href="/administration/monitoring"
                        class="navbar-item is-active">
                        Monitoring
                    </a>
                    
                    <a href="/administration/rolling-update"
                        class="navbar-item ">
                        Rolling Restart and Upgrade
                    </a>
                    
                    <a href="/administration/scale-in-out"
                        class="navbar-item ">
                        Scale-in and Scale-out
                    </a>
                    
                    <a href="/administration/resource-management"
                        class="navbar-item ">
                        Resource Management
                    </a>
                    
                    <a href="/administration/cold-backup"
                        class="navbar-item ">
                        Cold Backup
                    </a>
                    
                    <a href="/administration/meta-recovery"
                        class="navbar-item ">
                        Metadata Recovery
                    </a>
                    
                    <a href="/administration/replica-recovery"
                        class="navbar-item ">
                        Replica Data Recovery
                    </a>
                    
                    <a href="/administration/zk-migration"
                        class="navbar-item ">
                        Zookeeper Migration
                    </a>
                    
                    <a href="/administration/table-migration"
                        class="navbar-item ">
                        Table Migration
                    </a>
                    
                    <a href="/administration/table-soft-delete"
                        class="navbar-item ">
                        Table Soft-Delete
                    </a>
                    
                    <a href="/administration/table-env"
                        class="navbar-item ">
                        Table Environment Variables
                    </a>
                    
                    <a href="/administration/remote-commands"
                        class="navbar-item ">
                        Remote Command
                    </a>
                    
                    <a href="/administration/partition-split"
                        class="navbar-item ">
                        Partition-Split
                    </a>
                    
                    <a href="/administration/duplication"
                        class="navbar-item ">
                        Duplication
                    </a>
                    
                    <a href="/administration/compression"
                        class="navbar-item ">
                        Data Compression
                    </a>
                    
                    <a href="/administration/throttling"
                        class="navbar-item ">
                        Throttling
                    </a>
                    
                    <a href="/administration/experiences"
                        class="navbar-item ">
                        Experiences
                    </a>
                    
                    <a href="/administration/manual-compact"
                        class="navbar-item ">
                        Manual Compact
                    </a>
                    
                    <a href="/administration/usage-scenario"
                        class="navbar-item ">
                        Usage Scenario
                    </a>
                    
                    <a href="/administration/bad-disk"
                        class="navbar-item ">
                        Bad Disk Repair
                    </a>
                    
                    <a href="/administration/whitelist"
                        class="navbar-item ">
                        Replica Server Whitelist
                    </a>
                    
                    <a href="/administration/backup-request"
                        class="navbar-item ">
                        Backup Request
                    </a>
                    
                    <a href="/administration/hotspot-detection"
                        class="navbar-item ">
                        Hotspot Detection
                    </a>
                    
                </div>
            </div>
            
        </div>
    </div>
</nav>

<nav class="navbar is-hidden-mobile">
    <div class="navbar-start w-full">
        <div class="navbar-item pl-0 w-full">
            <!--TODO(wutao): Given the limitation of docsearch that couldn't handle multiple input,
                I make searchbox only shown in desktop. Fix this issue when docsearch.js v3 released.
                Related issue: https://github.com/algolia/docsearch/issues/230-->
            <div id="docsearch"></div>
        </div>
    </div>
    <div class="navbar-end">
        <div class="navbar-item">
            

<!--A simple language switch button that only supports zh and en.-->
<!--IF its language is zh, then switches to en.-->

<a class="button is-light is-outlined is-inverted" href="/zh/administration/monitoring"><strong>中</strong></a>

        </div>
    </div>
</nav>

            <section class="hero is-info lg:mr-3">
                <div class="hero-body">
                    
                    <p class="title is-size-2 is-centered">Monitoring</p>
                </div>
            </section>
            <section class="section" style="padding-top: 2rem;">
                <div class="content">
                    <h2 id="components">Components</h2>

<p>Since v1.12.0, Pegasus supports collecting and visualizing monitoring metrics using <a href="https://prometheus.io/">Prometheus</a> and <a href="https://grafana.com/">Grafana</a>.</p>

<ul>
  <li>Prometheus</li>
</ul>

<blockquote>
  <p>Prometheus is an open-source system monitoring and alerting toolkit. It stores metrics from monitored systems in its own time-series database, and provides a rich multi-dimensional query language to meet different visualization needs.</p>
</blockquote>

<ul>
  <li>Grafana</li>
</ul>

<blockquote>
  <p>Grafana is an open-source analytics and visualization platform. It supports multiple mainstream time-series data sources including Prometheus. With query languages corresponding to each data source, Grafana retrieves and displays data, and through configurable dashboards, quickly presents these data in charts.</p>
</blockquote>

<p><strong>Note</strong></p>

<p>This document only provides one approach to collect and visualize Pegasus monitoring data using Prometheus and Grafana. Pegasus does not include or maintain these components. For more details, please refer to their official documentation.</p>

<h2 id="configure-prometheus">Configure Prometheus</h2>

<p>This section describes how to configure Prometheus.</p>

<h3 id="step-1-configure-pegasus-services">Step 1: Configure Pegasus services</h3>

<p>By default, Pegasus does not push metrics to any external system. You need to modify the configuration to enable Prometheus push:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[pegasus.server]</span><span class="w">
  </span><span class="py">perf_counter_sink</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">prometheus</span>
<span class="w">  </span><span class="py">prometheus_port</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">9091</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: To verify that Prometheus push is enabled on a Pegasus node, check whether <code class="language-plaintext highlighter-rouge">http://{pegasus_host}:{prometheus_port}/metrics</code> is accessible.</p>
</blockquote>

<h4 id="using-prometheus-with-onebox">Using Prometheus with Onebox</h4>

<p>If you use onebox, first modify <code class="language-plaintext highlighter-rouge">src/server/config.min.ini</code> to enable Prometheus push. You do not need to change <code class="language-plaintext highlighter-rouge">prometheus_port</code>:</p>

<div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[pegasus.server]</span><span class="w">
  </span><span class="py">perf_counter_sink</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">prometheus</span>
<span class="w">  </span><span class="py">prometheus_port</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">@PROMETHEUS_PORT@</span>
</code></pre></div></div>

<p>In onebox mode, multiple Pegasus processes run on a single machine, so the Prometheus ports of replica, meta, and collector may conflict. Our current solution is to assign a dedicated Prometheus port to each process:</p>

<ul>
  <li>collector: 9091</li>
  <li>meta: [9092, 9093, 9094…]</li>
  <li>replica: [9092+{META_COUNT}, 9093+{META_COUNT}, 9094+{META_COUNT}…]</li>
</ul>

<p>For example, for a onebox cluster with 2 meta, 3 replica, and 1 collector:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./run.sh start_onebox <span class="nt">-r</span> 3 <span class="nt">-m</span> 2 <span class="nt">-c</span>
</code></pre></div></div>

<ul>
  <li>meta1: 9092, meta2: 9093</li>
  <li>replica1: 9094, replica2: 9095, replica3: 9096</li>
</ul>

<h3 id="step-2-install-and-run-prometheus">Step 2: Install and run Prometheus</h3>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://github.com/prometheus/prometheus/releases/download/v2.15.2/prometheus-2.15.2.linux-amd64.tar.gz
<span class="nb">tar </span>xvfz prometheus-2.15.2.linux-amd64.tar.gz
<span class="nb">cd </span>prometheus-2.15.2.linux-amd64
</code></pre></div></div>

<p>Modify <code class="language-plaintext highlighter-rouge">prometheus.yml</code> under the Prometheus directory. Example template:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">global</span><span class="pi">:</span>
  <span class="na">scrape_interval</span><span class="pi">:</span> <span class="s">5s</span>

<span class="na">scrape_configs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">job_name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">pegasus'</span>
    <span class="na">static_configs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">targets</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">collector_host:9091'</span><span class="pi">]</span>
        <span class="na">labels</span><span class="pi">:</span>
          <span class="na">group</span><span class="pi">:</span> <span class="s">collector</span>

      <span class="pi">-</span> <span class="na">targets</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">meta_host1:9091'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">meta_host2:9091'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">meta_host3:9091'</span><span class="pi">]</span>
        <span class="na">labels</span><span class="pi">:</span>
          <span class="na">group</span><span class="pi">:</span> <span class="s">meta</span>

      <span class="pi">-</span> <span class="na">targets</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">replica_host1:9091'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">replica_host2:9091'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">replica_host3:9091'</span><span class="pi">]</span>
        <span class="na">labels</span><span class="pi">:</span>
          <span class="na">group</span><span class="pi">:</span> <span class="s">replica</span>
      <span class="c1">#</span>
      <span class="c1"># NOTE: Add the following lines if node exporter is deployed.</span>
      <span class="c1"># - targets:</span>
      <span class="c1">#     [</span>
      <span class="c1">#       'node_exporter_host1:9100',</span>
      <span class="c1">#       'node_exporter_host2:9100',</span>
      <span class="c1">#       ...</span>
      <span class="c1">#       'node_exporter_hostn:9100',</span>
      <span class="c1">#     ]</span>
      <span class="c1">#   labels:</span>
      <span class="c1">#     group: node_exporter</span>
</code></pre></div></div>

<p>For the onebox cluster started by <code class="language-plaintext highlighter-rouge">./run.sh start_onebox -r 3 -m 2 -c</code>, the actual configuration is:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">global</span><span class="pi">:</span>
  <span class="na">scrape_interval</span><span class="pi">:</span> <span class="s">5s</span>

<span class="na">scrape_configs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">job_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pegasus"</span>
    <span class="na">static_configs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">targets</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">0.0.0.0:9091"</span><span class="pi">]</span>
        <span class="na">labels</span><span class="pi">:</span>
          <span class="na">group</span><span class="pi">:</span> <span class="s">collector</span>

      <span class="pi">-</span> <span class="na">targets</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">0.0.0.0:9092"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">0.0.0.0:9093"</span><span class="pi">]</span>
        <span class="na">labels</span><span class="pi">:</span>
          <span class="na">group</span><span class="pi">:</span> <span class="s">meta</span>

      <span class="pi">-</span> <span class="na">targets</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">0.0.0.0:9094"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">0.0.0.0:9095"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">0.0.0.0:9096"</span><span class="pi">]</span>
        <span class="na">labels</span><span class="pi">:</span>
          <span class="na">group</span><span class="pi">:</span> <span class="s">replica</span>
</code></pre></div></div>

<p>After modifying <code class="language-plaintext highlighter-rouge">prometheus.yml</code>, start Prometheus:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./prometheus <span class="nt">--config</span>.file<span class="o">=</span>prometheus.yml
</code></pre></div></div>

<p>Open <a href="http://localhost:9090">http://localhost:9090</a>. Seeing the following page indicates success for this step:</p>

<p><img src="/assets/images/prometheus-server.png" alt="prometheus-server" /></p>

<p>Note: To verify Prometheus configuration, check <code class="language-plaintext highlighter-rouge">http://{prometheus_host}:9090/targets</code> to view the scrape status of each node.</p>

<p>In the Expression input box, type your query and click Execute to display the results in the Table tab. Select Graph to view the time series chart.</p>

<p>Note</p>

<ol>
  <li>
    <p>In real operations, we often need system-level metrics such as cpu.busy, disk.iostat, etc. When deploying Pegasus clusters, consider deploying a node exporter on each machine. See: <a href="https://github.com/prometheus/node_exporter">Node Exporter</a></p>
  </li>
  <li>
    <p><a href="https://github.com/prometheus/alertmanager">Alert Manager</a> is Prometheus’s alerting component, which requires separate deployment (solution not provided here; refer to official docs). With Alert Manager, users can configure alert policies and receive notifications via email, SMS, etc.</p>
  </li>
  <li>
    <p>Currently our <code class="language-plaintext highlighter-rouge">prometheus.yml</code> uses static configuration (<code class="language-plaintext highlighter-rouge">static_configs</code>). Its drawback is that you must manually update the config when scaling. Prometheus supports multiple dynamic service discovery mechanisms (e.g., k8s, Consul, DNS). You can customize based on your needs. See: <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/">Configuration</a>, <a href="https://prometheus.io/blog/2018/07/05/implementing-custom-sd/">Custom SD</a></p>
  </li>
</ol>

<h2 id="configure-grafana">Configure Grafana</h2>

<p>This section describes how to configure Grafana.</p>

<h3 id="step-1-install-and-run-grafana">Step 1: Install and run Grafana</h3>

<p>Download Grafana binary:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://dl.grafana.com/oss/release/grafana-6.0.0.linux-amd64.tar.gz <span class="c"># if it fails, try adding --no-check-certificate</span>
<span class="nb">tar</span> <span class="nt">-zxvf</span> grafana-6.0.0.linux-amd64.tar.gz
<span class="nb">cd </span>grafana-6.0.0
</code></pre></div></div>

<p>Start Grafana:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/grafana-server web
</code></pre></div></div>

<p>If you see output like below, Grafana is started successfully:</p>

<pre><code class="language-Linux">INFO[07-24|14:36:59] Starting Grafana                         logger=server version=6.0.0 commit=34a9a62 branch=HEAD compiled=2019-02-25T22:47:26+0800
...
INFO[07-24|14:37:00] HTTP Server Listen                       logger=http.server address=0.0.0.0:3000 protocol=http subUrl= socket=
INFO[07-24|14:37:00] cleanup of expired auth tokens done      logger=auth count=2
</code></pre>

<h3 id="step-2-add-prometheus-as-a-data-source">Step 2: Add Prometheus as a data source</h3>

<ol>
  <li>
    <p>Log in to Grafana:</p>

    <p><img src="/assets/images/grafana-login.png" alt="grafana-login" /></p>

    <ul>
      <li>Default address: <a href="http://localhost:3000">http://localhost:3000</a></li>
      <li>Default username: <code class="language-plaintext highlighter-rouge">admin</code></li>
      <li>Default password: <code class="language-plaintext highlighter-rouge">admin</code></li>
    </ul>

    <p>Note: You can skip the Change Password step.</p>
  </li>
  <li>
    <p>Click <strong>Configuration</strong> in the Grafana sidebar, then <strong>Data Sources</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Add data source</strong>.</p>
  </li>
  <li>
    <p>Specify the data source information:</p>

    <ul>
      <li>In <strong>Name</strong>, give the data source a name.</li>
      <li>In <strong>Type</strong>, select <strong>Prometheus</strong>.</li>
      <li>In <strong>URL</strong>, specify the IP address of Prometheus.</li>
      <li>Specify other fields as needed.</li>
    </ul>
  </li>
  <li>
    <p>Click <strong>Add</strong> to save the new data source.</p>
  </li>
</ol>

<h3 id="step-3-import-pegasus-dashboard">Step 3: Import Pegasus Dashboard</h3>

<p>Pegasus provides a dashboard with basic monitoring. The corresponding JSON file: <a href="https://github.com/XiaoMi/pegasus-common/releases/download/deps/grafana-dashboard.json">Pegasus dashboard JSON</a></p>

<p>After downloading the JSON, import it into Grafana:</p>

<p>Open Grafana, click the “+” on the left, select <strong>Import</strong>, and go to the import page.</p>

<p><img src="/assets/images/grafana-import-panel-upload.png" alt="grafana-import-panel" /></p>

<p>Click the “Upload .json File” button at the top right, then select the file. After selection, you will see the following page:</p>

<p><img src="/assets/images/grafana-import-panel.png" alt="grafana-import-panel" /></p>

<p>Click “import” at the bottom left to complete the import and open the Pegasus Dashboard:</p>

<p><img src="/assets/images/grafana-dashboard-pegasus.png" alt="grafana-import-panel" /></p>

<p>The dashboard contains two rows: Pegasus-Cluster and Pegasus-Table, representing cluster-level and table-level monitoring. Enter the specific cluster name in the <code class="language-plaintext highlighter-rouge">cluster_name</code> control at the top-left to view the corresponding metrics of that cluster.</p>

                </div>
            </section>
            <footer class="footer">
    <div class="container">
        <div class="content is-small has-text-centered">
            <div style="margin-bottom: 20px;">
                <a href="http://incubator.apache.org">
                    <img src="/assets/images/egg-logo.png"
                         width="15%"
                         alt="Apache Incubator"/>
                </a>
            </div>
            Copyright &copy; 2023 <a href="http://www.apache.org">The Apache Software Foundation</a>.
            Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version
            2.0</a>.
            <br><br>
            
            Apache Pegasus is an effort undergoing incubation at The Apache Software Foundation (ASF),
            sponsored by the Apache Incubator. Incubation is required of all newly accepted projects
            until a further review indicates that the infrastructure, communications, and decision making process
            have stabilized in a manner consistent with other successful ASF projects. While incubation status is
            not necessarily a reflection of the completeness or stability of the code, it does indicate that the
            project has yet to be fully endorsed by the ASF.
            
            <br><br>
            Apache Pegasus, Pegasus, Apache, the Apache feather logo, and the Apache Pegasus project logo are either
            registered trademarks or trademarks of The Apache Software Foundation in the United States and other
            countries.
        </div>
    </div>
</footer>
        </div>

        <!-- right panel -->
        <div class="dashboard-panel is-small is-scrollable is-hidden-mobile">
            <p class="menu-label">
    <span class="icon">
        <i class="fa fa-bars" aria-hidden="true"></i>
    </span>
    Table of contents
</p>
<ul class="menu-list">
  <li><a href="#components">Components</a></li>
  <li><a href="#configure-prometheus">Configure Prometheus</a>
    <ul>
      <li><a href="#step-1-configure-pegasus-services">Step 1: Configure Pegasus services</a>
        <ul>
          <li><a href="#using-prometheus-with-onebox">Using Prometheus with Onebox</a></li>
        </ul>
      </li>
      <li><a href="#step-2-install-and-run-prometheus">Step 2: Install and run Prometheus</a></li>
    </ul>
  </li>
  <li><a href="#configure-grafana">Configure Grafana</a>
    <ul>
      <li><a href="#step-1-install-and-run-grafana">Step 1: Install and run Grafana</a></li>
      <li><a href="#step-2-add-prometheus-as-a-data-source">Step 2: Add Prometheus as a data source</a></li>
      <li><a href="#step-3-import-pegasus-dashboard">Step 3: Import Pegasus Dashboard</a></li>
    </ul>
  </li>
</ul>

        </div>
    </div>

    <script src="/assets/js/app.js" type="text/javascript"></script>
     <script>
     docsearch({
         container: '#docsearch',
         appId: 'QRN30RBW0S',
         indexName: 'pegasus-apache',
         apiKey: 'd3a3252fa344359766707a106c4ed88f',
         debug: true
     });
 </script>

</body>

</html>